# Drizzle ORM Rules

## Schema Definition
- Define schemas in `src/lib/db/schema.ts`
- Use Drizzle's type inference (`$inferSelect`, `$inferInsert`)
- Export types alongside schemas
- Use proper column types and constraints

## Queries
- Use Drizzle query builder (no raw SQL unless necessary)
- Use transactions for multi-step operations
- Always handle database errors
- Use prepared statements for repeated queries

## Migrations
- Generate migrations with `pnpm db:generate`
- Review migrations before applying
- Use `pnpm db:push` for development
- Use `pnpm db:migrate` for production

## Best Practices
- Keep queries simple and readable
- Use relations for joins (not manual joins)
- Index frequently queried columns
- Use transactions for data consistency
